<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"   
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{/layout/mypage_layout2}">

<head>
<title>Edit Personal Info - 플레이보이스(playvoice)</title>
  
<link rel="stylesheet" th:href="@{/css/app/mypage.css}">
<script th:src="@{https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js}"></script>
   
<script th:inline="javascript">
$(document).ready(function() {
	
	// [폼 입력시 수정 버튼 나타내기]-----------------------------------------------------
	$(".confirm-edit").on('input',function(){
		$("#editProfileButtonArea").show(100);
	});
	// [수정 버튼 숨기기]
	$(".cancelEditBtn").click(function(){
		$(this).closest(".buttonGroupArea").hide(100);
	});
	// [비밀번호 수정 버튼 나타내기]-----------------------------------------------------
	$(".passwordConfirm-edit").on('input',function(){
		$("#passwordButtonArea").show(100);
	});
	
	// [폼에 숫자만 입력시키기 (전화번호)]-------------------------------------------------
	$(".onlyInputNumber").on("change keyup keydown", function(){
		var type = $(this).val().replace(/[^0-9]/g,'');
		$(this).val(type);
		$("[name='phone']").val($("#phone1").val() + "-"
									+ $("#phone2").val() + "-"
									+ $("#phone3").val());
	});
	
	// [주소 검색창 띄우기]-----------------------------------------------------------
	$("#searchPostNum").click(function(){
		new daum.Postcode({
	        oncomplete: function(data) {
				$("#buyerDistrict").val(data.sido);
	            $("#buyerZipCode").val(data.zonecode);
	            $("#buyerAddr1").val(data.address);
	            $("#buyerAddr2").focus();
	        }
	    }).open();
	});
	$(".addAdressForm").click(function(){
		$("#searchPostNum").click();
	});
	
	// [비밀번호 변경 폼 나타내기]------------------------------------------------------
	$("#displayPassword_btn").click(function(){
		$("#editPasswordForm").toggle();
	});
	
	// [개인정보 수정]--------------------------------------------------------------
	$("#editPersonalInfo_btn").click(function(){
		var name = $("#name").val();
		var phone = $("#phone").val();
		var buyerZipCode = $("#buyerZipCode").val();
		var buyerAddr1 = $("#buyerAddr1").val();
		$(".guide").html("");
		if(name == null || name.trim().length == 0) {
			$('#nameConfirm').html('<font color=red>이름을 입력해 주세요.</font>');
		} else if (phone == null || phone.trim().length < 8) {
			$('#phoneConfirm').html('<font color=red>전화번호를 입력해 주세요.</font>');
		} else if (buyerZipCode == null || buyerZipCode.length == 0) {
			$('#adressConfirm').html('<font color=red>주소를 입력해 주세요.</font>');
		} else if (buyerAddr1 == null || buyerAddr1.length == 0) {
			$('#adressConfirm').html('<font color=red>주소를 입력해 주세요.</font>');
		} else {
			alert("수정이 완료되었습니다");
		}
	});
	
	
});
</script>

</head>

<section layout:fragment="content">

<div th:insert="~{/mypage/incl/mypage_top_menu2::menuProfile}"></div>

<div id="editProfileFormContainer" class="edit-profile-form my-4">
	<div class="formContainer">
		<h3>
			Edit Personal Information
			<button type="button" class="btn btn-info btn-xs" style="display: none">
				<span class="glyphicon glyphicon-ok"></span> SUCCESS
			</button>
			<span>Please fill the text in the field.</span>
		</h3>
		<div class="resMsgs" style="display: none;">
			<h3>
				Response Messages <span>Your request was processed.</span>
			</h3>
			<pre></pre>
		</div>
		<div>
		<!-- -------------------------[1. 로그인 정보]-------------------------- -->
		<form method="post" class="form-horizontal">
			<!-- 플레이보이스 로그인 -->
			<div class="form-group row">
				<label class="col-md-2 control-label headerLabel">ID</label>
				<div class="col-md-10 control-text pt-md-1">
					eee0930
				</div>
			</div>
			<div class="form-group row">
				<label class="col-md-2 control-label headerLabel">e-mail</label>
				<div class="col-md-5 control-text pt-md-1">
					eee0930@naver.com
				</div>
			</div>
			<div class="form-group row">
				<label class="col-md-2 control-label headerLabel">password</label>
				<div class="col-md-10 control-button">
					<button id="displayPassword_btn" class="btn btn-mypage btn-sm" 
						type="button">비밀번호 변경</button>
				</div>
			</div>
			<!-- 비밀번호 수정 폼 -->
			<div id="editPasswordForm" style="display: none;">
				<div class="form-group row">
					<label class="col-md-2 control-label headerLabel">기존 비밀번호</label>
					<div class="col-md-8">
						<input type="password" class="playvoice-form passwordConfirm-edit form-control"/>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-md-2 control-label headerLabel">새 비밀번호</label>
					<div class="col-md-8">
						<input type="password" class="playvoice-form passwordConfirm-edit form-control"/>
						<div class="password-guide text-danger" style="display: none;">영문/숫자/특수문자 2가지 이상 혼합하여 다시 입력해 주세요</div>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-md-2 control-label headerLabel">비밀번호 확인</label>
					<div class="col-md-8">
						<input type="password" class="playvoice-form passwordConfirm-edit form-control"/>
						<div class="password-guide text-danger"></div>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-md-2"></label>
					<div class="password-guide col-md-10">
						※ 영문 대소문자/숫자/특수문자 2가지 이상 혼합<br><font color="red">(*,&amp;,+,- 제외)</font>
						(8~20자)
					</div>
				</div>
				<div id="passwordButtonArea" class="buttonGroupArea form-group row pt-3" style="display: none;">
					<div class="col-md-2"></div>
					<div class="col-md-auto col-6">
						<input id="editPasswordBtn" type="submit" disabled
							class="edit-btn btn btn-mypage" value="수정하기">
					</div>
					<div class="col-md-auto col-6">
						<input type="reset" class="cancelEditBtn btn btn-outline-mypage2" value="취 소">
					</div>
				</div>
			</div>
			<!-- SNS 로그인 -->
			<div class="form-group row" style="display: none;">
				<label class="col-md-2 control-label headerLabel">Login Info</label>
				<div class="col-md-10 control-text">
					SNS login
				</div>
			</div>
		</form>
		
		<!-- -----------------------[2. 배송 정보]------------------------- -->
		<form id="editPersonalInfoForm" method="post" class="form-horizontal">	
			<div class="division-border">Shipping Info</div>
			<div th:if="${resultMsg}" class="form-group row">
				<label class="col-md-2"></label>
				<div class="col-md-10">
					<div class="result-msg" th:text="${resultMsg}"></div>
				</div>
			</div>
			<!-- 이름 -->
			<div class="form-group row">
				<label class="col-md-2 control-label headerLabel">이름</label>
				<div class="col-md-5">
					<input id="name" type="text" placeholder="이름" 
						class="playvoice-form confirm-edit form-control"/>
					<div id="nameConfirm" class="guide"></div>
				</div>
			</div>
			<!-- 전화번호 -->
			<div class="form-group row">
				<label class="col-md-2 control-label headerLabel">전화번호</label>
				<div class="col-md-10">
					<div class="row no-gutters">
						<div class="col-md-2 col">
							<select id="phone1" class="playvoice-form confirm-edit form-control"
								th:with="phone1Arr=${#strings.arraySplit('010,011,012,015,016,017,018,019',',')}">
								<option th:each="phone1:${phone1Arr}" 
									th:text="${phone1}" th:value="${phone1}"></option>
							</select>
						</div>
						<div class="col-auto align-self-center px-2"> - </div>
						<div class="col-md-2 col">
							<input type="tel" maxlength="4"
								class="onlyInputNumber playvoice-form confirm-edit form-control"/>
						</div>
						<div class="col-auto align-self-center px-2"> - </div>
						<div class="col-md-2 col">
							<input type="tel" maxlength="4"
								class="onlyInputNumber playvoice-form confirm-edit form-control"/>
						</div>
					</div>
					<input id="phone" type="hidden" name="phone"/>
					<div id="phoneConfirm" class="guide"></div>
				</div>
			</div>
			<!-- 주소 -->
			<div class="form-group row">
				<label class="col-md-2 control-label headerLabel">주소</label>
				<div class="col-md-10">
					<div class="row no-gutters pb-2">
						<div class="col-6 pr-3">
							<input id="buyerDistrict" type="hidden" name="address.district"/>
							<input id="buyerZipCode" name="address.postalCode" 
								placeholder="우편 번호" type="text"
								class="addAdressForm playvoice-form confirm-edit form-control"/>
						</div>
						<div class="col control-button">
							<button id="searchPostNum" class="btn btn-sm btn-mypage2" type="button">
								우편번호 검색
							</button>
						</div>
					</div>
					<div class="pb-2">
						<input id="buyerAddr1" type="text" 
							placeholder="주소" name="address.address1"
							class="addAdressForm playvoice-form confirm-edit form-control"/>
					</div>
					<div class="pb-1">
						<input id="buyerAddr2" type="text" 
							placeholder="상세 주소" name="address.address2"
							class="confirm-edit playvoice-form form-control"/>
					</div>
					<div id="adressConfirm" class="guide"></div>
				</div>
			</div>
			<!-- 수정 버튼 -->
			<div id="editProfileButtonArea" class="buttonGroupArea form-group row pt-3" style="display: none;">
				<div class="col-md-2"></div>
				<div class="col-md-auto col-6">
					<input id="editPersonalInfo_btn" type="button" 
						class="edit-btn btn btn-mypage" value="수정하기"/>
				</div>
				<div class="col-md-auto col-6">
					<input type="reset" value="취 소"
						 class="cancelEditBtn btn btn-outline-mypage2"/>
				</div>
			</div>
			
		</form>
		</div>
	</div>
</div><!-- end of editProfileFormContainer -->	
<div class="remove-member text-right mb-5">
	<div class="mb-2">
		<span>소중한 개인정보 이용내역이 궁금하다면</span><br class="d-sm-none">
		<a th:href="@{/terms/privacy}" target="_blank">개인정보 이용내역 보기 
			<i class="fa fa-caret-right"></i></a>
	</div>
	<div>
		<span>플레이보이스를 더 이상 이용하지 않는다면</span><br class="d-sm-none">
		<a th:href="@{/member/delete}">계정 삭제 바로가기 <i class="fa fa-caret-right"></i></a>
	</div>
</div>
</section>


</html>