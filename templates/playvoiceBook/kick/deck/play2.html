<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/playvoicebook_layout2}">

<head>
<title>죠니 덱 (Johnny Deck) - 플레이보이스 (playvoice)</title>
<link rel="stylesheet" th:href="@{/css/app/playkick.css}">
<link rel="stylesheet" th:href="@{/css/app/playvoicebook.css}">
<link rel="stylesheet" th:href="@{/css/app/playvoice_sponsor.css}">
<link rel="stylesheet" th:href="@{/css/app/playvoice_ad.css}">
<script th:src="@{/js/app/playvoicebook.js}"></script>
<script th:src="@{/js/public/classie.js}"></script>
<script th:src="@{/js/public/dynamics.min.js}"></script>
<script th:inline="javascript">
/*<![CDATA[*/
var discardCount = /*[[${discard}]]*/0; // discard 수
var deckRoundSize = 30; // 하나의 deck round size
var deckRound = Math.floor(discardCount/deckRoundSize) + 1; // deck round 번호

$(document).ready(function() {

	// [화면 진입 시 테스트 start 영역으로 스크롤 이동]---------------------------------------
	var quizBeforeDiv = $("#quizBeforeDiv").offset().top - $('#headerNavbar').height();
    $('html, body').animate({scrollTop : quizBeforeDiv - 10}, 300);
    
	// [카드 케이스 캐릭터를 랜덤으로 세팅 (Johnny, Yaya)]-----------------------------------
	var styleIndex = Math.floor(Math.random() * 2 + 1);
	$("#quizBeforeDiv").addClass("style-" + styleIndex);
	
	// [디스카드 수로 포커 칩 세팅]------------------------------------------------------
	var discardChips = Array.from(""+discardCount).reverse();
	var chipColors = ['white', 'red', 'blue', 'green', 'black'];
	for(var i = 0; i < discardChips.length; i++) {
		var chipSize = Math.floor(discardChips[i]);
		if(chipSize > 0) {
			var chipColor = chipColors[i];
			var $chipCover = $('<div class="deckround-list"></div>');
			var $chip = '<div class="chip-cover"><div class="pokerchip ' 
						+ chipColor + '"></div></div>';
			var $chipSizeDiv = '<div class="chip-size">'
						+ chipColor + ' 칩 ' + chipSize + '개</div>'
			$(".deckround-list-cover").append($chipCover);
			$chipCover.append($chipSizeDiv);			
			for(var j = 0; j < chipSize; j++) {
				$chipCover.append($chip);
			}
		}
	}
	
	
	// [게임 가이드 열고 닫기]----------------------------------------------------------
	$("#openDeckGuideBtn, #closeDeckGuideBtn").click(function(){
		if($("#deckDescriptionDiv").is(":visible")) {
			$("#deckDescriptionDiv").hide();
		} else {
			$("#deckDescriptionDiv").find(".description-text").show();
			$("#deckDescriptionDiv").addClass("description-open").show();
		}
	});

	// [Review Quiz 가이드 열고 닫기]-------------------------------------------------
	$("#openDiscardQuizGuideBtn, .closeDiscardQuizBtn").click(function(){
		$("#discardQuizGuideDiv").toggle();
	});
	
	// [덱 카드 초기화]--------------------------------------------------------------
	/* var stacks = new Stack(document.getElementById('cards'),{ 
		infinite: false,
		stackItemsAnimationDelay : 100,
		stackItemsAnimation : {
			duration: 800, 
			type: dynamics.spring,	
		}, 
		visible: 1, 
		perspectiveOrigin: '50% 50%'
	}) */
	// [효과음 세팅]----------------------------------------------------------------
	var beep_remind = new Audio();
	// [카드 뒤집기]----------------------------------------------------------------
	var flip_card = new Audio();
	
	// [퀴즈 세팅/ 시작]------------------------------------------------------------
	$(".startBtn").click(function(){
		$(this).closest(".card-dimention-section").find(".card-coverage-section").addClass("open");
		$("#quizBackHideDiv").show();
		setTimeout(function() {
			$("#quizBeforeDiv").hide();
			$("#tracerQuizDiv").fadeIn(1000);
			$("html").addClass("modalOpen");
			window.addEventListener('load', function(){setTimeout(scrollTo, 0, 0, 1);
			}, false);
		}, 300);
	});
	
	// [디스카드 퀴즈 입력칸 활성화]-----------------------------------------------------
	$("#inputTextBtn").click(function(){
		$("#blankDiv .target").children().focus();
		$("#blankDiv").addClass("self-input");
		$(this).hide();
		$("#wordSelectBtn").show();
	});
	$("#wordSelectBtn").click(function(){
		$("#blankDiv").removeClass("self-input");
		$("#blankDiv .blank").removeClass("focus");
		$(this).hide();
		$("#inputTextBtn").show();
	});
	
	$(".rightAnswer").click(function(){
		$("#discardQuizDiv").hide();
		addBlurClass(false);
		var confirmMsg = "정확히 말할 수 있는 문장이군요";
		openConfirmDiv(confirmMsg, true);
	});
	
	$(".wrongAnswer").click(function(){
		$("#discardQuizDiv").hide();
		addBlurClass(false);
		var confirmMsg = "정확히 말할 수 있는 문장이 아니군요";
		openConfirmDiv(confirmMsg, false);
	});
	
	
	// [빙고판 열기 (go bingo 버튼 클릭)]-----------------------------------------------
	$("#viewBingoBtn").click(function(){
		$("#discardQuizDiv").hide();
		$("#kissAndCrySection").show();
	});
	
	// [kiss & cry 세팅 (기존의 deckRound, deckCon 정보를 불러옴)]-----------------------
	setDeckRound(deckRound);
	
	// [kiss & cry 영역 닫기]------------------------------------------------------
	$("#closeBreak").click(function(){
		$("#kissAndCrySection").hide();
		
		addBlurClass(false);
	});
	
	// [빙고 설명 열기]--------------------------------------------------------------
	$("#explainBingo").click(function(){
		$(".bingo-explain-section").toggle();
	});
	// [빙고 설명 닫기]--------------------------------------------------------------
	$(".closeBingoDiv").click(function(){
		$(".bingo-explain-section").hide();
	});
	
	// [카드 뒤집기 (예문 보기, 음성 듣기)]-----------------------------------------------
	$(".swipeCard").click(function(){
		if($(this).is(".activeCard")) {
			// 카드 영어 예문 보기
			$(this).find(".eng").fadeIn(300);
			$(this).find(".sentenceVoice").fadeIn(300);
		} else {
			// 카드 앞면으로 뒤집기
			$(this).addClass("activeCard");
			flip_card.src = '/sounds/flip_card.mp3';
			flip_card.load();
			flip_card.play();
		}
	}).one('click', function(){
		beep_remind.src = '/sounds/remind.wav';
		beep_remind.load();
	});
	
	var cardX, cardY, moving = false,
		cardInitX, 
		cardInitY;
	
	if($('#cards').length > 0) {
		cardInitX = $('#cards').offset().left; 
		cardInitY = $('#cards').offset().top;
	}
	
	// [터치 스와이프시 카드가 손가락 위치를 따라가도록]-----------------------------------------
	$(document).on('touchstart','.swipeCard.activeCard', function(e){
		cardX = e.touches[0].clientX;
		cardY = e.touches[0].clientY;
	}).on('touchmove','.swipeCard.activeCard', function(e){
		var left = e.touches[0].clientX - cardX;
		$(this).css('left', left)
			   .css('top', e.touches[0].clientY - cardY);
		if(left > 0-$(this).width()/2){
			moving = true;
			$('#tracerQuizDiv').removeClass('pass').addClass('remind');
		}else if(left < $(this).width()/2){
			moving = true;
			$('#tracerQuizDiv').removeClass('remind').addClass('pass');
		}else{
			moving = false;
		}
	}).on('touchend touchcancel','.swipeCard.activeCard', function(e){
		if(moving && $('#tracerQuizDiv').is('.remind')){
			if(!beep_remind.paused) {
				beep_remind.pause();
				beep_remind.currentTime=0;
			}
			beep_remind.play();
			stacks.accept();
			discardProgress(false);
			actionKeepKissAndCry();
		}else if(moving && $('#tracerQuizDiv').is('.pass')){
			stacks.reject();
			discardProgress(true);
			actionDiscardKissAndCry();
		}else{
			$(this).animate({top:0,left:0}, 100);
		}
		moving = false;
	});
	
	// [퀴즈 종료]-----------------------------------------------------------------
	$("#endQuizBtn, #moveToList").click(function(){
		sessionStorage.setItem('johnnyDeckChipCount', 12);
		sessionStorage.setItem('johnnyDeckCompleteRound', true);
		sessionStorage.setItem('johnnyDeckRoundNumber', 3);
		sessionStorage.setItem('johnnyDeckconsToBingo', 14);
		sessionStorage.setItem('johnnyDeckRankingPoint', 53);
		location.href="/playvoiceBook/kick/deck/end";
	});
	
	sentenceLevelRate(120, 30);
	
	$("#endQuizBtn .button-msg1").hide();
	$("#endQuizBtn .button-msg2").show();
	$("#endQuizBtn").attr("title", "Johnny Deck 종료");
	
});

/**
 * 카드의 discard와 keep의 progress를 표시
 */
function discardProgress(status) {
	var stageSize = /*[[${stageSize}]]*/0;
	var barWidth = 100/stageSize;
	var progressBar = "<div class=\'count-cover col-auto ";
	if(status == true) {
		progressBar += "discard\'"
	} else {
		progressBar += "keep\'"
	}
	progressBar +=  "style=\'width: " + barWidth + "%;\'><div></div></div>";
	$(".discardProgress").append(progressBar);
}

/**
 * kiss&cry; 카드를 discard했을 때, 현재 라운드에 해당하는 deckcon을 제공함
 */
 function actionDiscardKissAndCry() {
	discardCount++;
	var deckConIndex = discardCount % deckRoundSize; // deckcon의 번호
	if((discardCount > 0) && (deckConIndex == 0)) {
		deckConIndex = 30;
	} else if ((discardCount > 30) && (deckConIndex == 1)) {
		// 덱 라운드가 변경 되었을 때
		deckRound++;
		$("#deckConArea").empty();
		setDeckRound(deckRound);
	}
	
	$("#kissAndCrySection").show();
}
 
/**
 * kiss&cry; 카드를 keep했을 때
 */
function actionKeepKissAndCry() {
	addBlurClass(true);
	$(".firework-effect").hide();
}
 
function setDeckRound(deckRoundIndex) {
	/* $("#kissAndCrySection").css("background-image", 
				"url(\'/images/app/playvoicebook/deckcon/deckround_back"+deckRoundIndex+".jpg\')"); */
	$("#kissAndCrySection .deck-con-section").addClass("roundCase" + deckRoundIndex);
	$("#kissAndCrySection .deckConSideDiv img").attr("src", 
				"/images/app/playvoicebook/deckcon/deckround"+deckRoundIndex+".png");
}

/**
 * kiss and cry를 열 때 뒤쪽 영역을 블러처리함
 */
function addBlurClass(divOpen) {
	if(divOpen) {
		$(".johnny-deck-description").addClass("kissAndCryBlur");
		$(".tracer-quiz-guide-section").addClass("kissAndCryBlur");
		$(".test-card-section").addClass("kissAndCryBlur");
		$(".discard-keep-sign-section").addClass("kissAndCryBlur");
	} else {
		$(".johnny-deck-description").removeClass("kissAndCryBlur");
		$(".tracer-quiz-guide-section").removeClass("kissAndCryBlur");
		$(".test-card-section").removeClass("kissAndCryBlur");
		$(".discard-keep-sign-section").removeClass("kissAndCryBlur");
	}
}

/**
 * 예문 난이도 표시
 */
function sentenceLevelRate(total, wrong) {
	total = 1;
	wrong = 0;
	if(wrong < 1) {
		wrong = 1;
	}
	var rateDeg = 180*(wrong/total) - 45;
	var ratePersent = Math.round(100*(wrong/total));
	var rateText = 'Super Easy';
	if(ratePersent <= 10) {
		rateText = 'Super Easy';
	} else if (ratePersent <= 30) {
		rateText = 'Easy';
	} else if (ratePersent <= 50) {
		rateText = 'Normal';
	} else if (ratePersent <= 80) {
		rateText = 'Hard';
	} else {
		rateText = 'Super Hard';
	}
	
	$("#sentenceLevel .difficulty-rate").css("transform", "rotate(" + rateDeg + "deg)");
	$("#sentenceLevel .rate-text-cover").text(rateText);
	$("#sentenceLevel .rate-count-cover").text(ratePersent);
}

/**
 * 자동으로 닫히는 확인창 열기
 */
function openConfirmDiv(msg, success) {
	$("#playKick_confirmMsg .msgSection").html(msg);
	$("#playKick_confirmMsg").removeClass("good bad").show();
	
	if(success) {
		$("#playKick_confirmMsg").addClass("good");
	} else {
		$("#playKick_confirmMsg").addClass("bad");
	}
	
	setTimeout(function() {
		$("#playKick_confirmMsg").fadeOut(200);
	}, 1200);
}

/*]]>*/
</script>
</head>

<section layout:fragment="content">
<!-- title & menu -->
<div id="menuSection" th:insert="~{/playvoiceBook/incl/playvoicebook_menu2::menu}"></div>

<!--/* -------------------------------[Modal] -----------------------------*/-->
<div id="playKick_modal" class="play-kick-modal modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content content-container">
			<div class="modal-body text-center">
				<div class="row no-gutters">
					<div class="col-sm text-center">
						<img src="/images/common/characters/africa_sad.png" width="100px">
					</div>
					<div class="col-sm-auto px-2 align-self-center">
						테스트가 아직 끝나지 않았습니다.<br>종료하겠습니까?
					</div>
					<div class="col-sm"></div>
				</div>
			</div>
			<div class="modal-footer justify-content-center">
				<button type="button" class="btn btn-outline-info btn-sm" 
					data-dismiss="modal">계속하기</button>
				<button id="endDeck_btn" type="button" class="btn btn-info btn-sm" 
					data-dismiss="modal">종료하기</button>
			</div>
		</div>
	</div>
</div>

<!--/* ----------------------------[확인 메세지 창] ----------------------------*/-->
<div id="playKick_confirmMsg" class="play-kick-confirm-msg bad" style="display: none;">
	<div class="msg-modal-header">
		<div class="header-image">
			<div class="face">
				<div class="eye"></div><div class="eye right"></div>
				<div class="mouth"></div>
			</div>
		</div>
		<div class="header-text"></div>
	</div>
	<div class="play-kick-confirm-msg-cover">
		<div class="msgSection"></div>
	</div>
</div>


<th:block th:if="${sufficientPoint == true}">
<div id="cardQuizSection" th:if="${reentrance == true}" 
	class="playvoice-play-kick-section my-4">

<!-- -----------------------[1. 테스트 시작 전]---------------------------------- -->	
<div id="quizBeforeDiv" class="before-quiz-section">
	<!-- ------------------------[1.1 라운드 수]-------------------------------- -->
	<div class="round-section">
		<label class="round-cover">
			<span class="poker-icon">&#9827;</span> 
			<span class="num">3</span> Round
			<span class="poker-icon ml-3">
				<img src="/images/app/playvoicebook/poker_chip.png" alt="플레이보이스"
					title="카드를 discard하면 Johnny Deck 칩을 딸 수 있습니다">
			</span>
			<span th:text="${discard}" class="num">3</span>
		</label>
	</div>
	<!-- ---------------------[1.2 시작 버튼/ 카드 상자]--------------------------- -->
	<div class="card-dimention-section">
		<div class="startBtn card-coverage-section">
			<div class="test-card-coverage cube-side top">
				<img src="/images/app/playvoicebook/card_case_paper.png">
				<div class="case-deco-line">
					&#9670; <span class="text-dark">&#9827;</span>
					&#9829; <span class="text-dark">&#9824;</span>
					&#9670; <span class="text-dark">&#9827;</span>
					&#9829; <span class="text-dark">&#9824;</span><br>
					<span class="deco-text">Johnny's Deck</span>
				</div>
			</div>
			<div class="cube-side bottom"></div>
			<div class="cube-side left"></div>
			<div class="cube-side right">Johnny's Deck</div>
			<div class="cube-side front"><div>speak out!</div></div>
			<div class="cube-side back"></div>
			<div class="card-click-text">click</div>
		</div>
	</div>
	<div class="guide-arrow left fadeout-blink">
		<div><i class="fa fa-arrow-left"></i></div>
		<div class="mt-2">Discard</div>
	</div>
	<div class="guide-arrow right fadeout-blink">
		<div><i class="fa fa-arrow-right"></i></div>
		<div class="mt-2">Keep</div>
	</div>
	
	<!-- --------------------[1.3 discard 포커 칩]---------------------------- -->
	<div class="deckround-list-section"><div class="deckround-list-cover">
	</div></div>
	
</div><!-- end of quizBeforeDiv -->


<!-- -------------------------[2. 테스트 영역]---------------------------------- -->	
<div id="tracerQuizDiv" class="play-kick-section" style="display: none;">
	<!-- -----------------------[2.1 가이드, 종료 버튼]--------------------------- -->
	<div class="tracer-quiz-guide-section container "><div class="row no-gutters">
		<div class="quiz-guide-div col-auto text-left align-self-center">
			<i id="openDeckGuideBtn" class="guide-button fa fa-question-circle" title="죠니덱 테스트 방법"></i>
		</div>
		<div class="col align-self-center">
			<!-- [discard & keep progress] -->
			<div class="discard-keep-sign-section">
				<div class="loading-line-section"><div class="discardProgress row no-gutters">
					<div class="count-cover col-auto discard" style="width: 10%"><div></div></div>
					<div class="count-cover col-auto keep" style="width: 10%"><div></div></div>
				</div></div>
			</div>
		</div>
		<div class="quiz-guide-div col-auto text-right align-self-center">
			<button id="endQuizBtn" class="btn btn-main2 end-quiz-btn" title="그만하기">
				<i class="fa fa-power-off"></i> 
				<span class="d-none d-md-inline-block">
					<span class="button-msg1">Quit</span>
					<span class="button-msg2" style="display: none;">End</span>
				</span>
			</button>
		</div>
	</div></div>
	
	<!-- -----------------------[2.2 플레이 설명 영역]---------------------------- -->
	<div id="deckDescriptionDiv" class="johnny-deck-description">
		<div class="description-text" style="display: none;">
			<span class="num">1.</span> 카드를 <b>클릭</b>해서 뒤집어 주세요.
		</div>
		<div class="description-text" style="display: none;">
			<span class="num">2.</span> 우리말 문장을 보고 <b>영어</b>로 말해 보세요.<br>
			<span class="num">3.</span> 정답을 보려면 카드를 한 번 더 클릭해 주세요.
		</div>
		<div class="description-text">
			<span class="num">4.</span> 자신 있게 말할 수 있는 카드는
			<b>왼쪽(discard)</b>으로,<br class="d-none d-xl-block">
			어려운 것은 <b>오른쪽(keep)</b>으로 슬라이드 해 주세요.
		</div>
		<i id="closeDeckGuideBtn" class="fa fa-times"></i>
	</div>
	
	<!-- 죠이덱 광고 right -->
	<div th:unless="${#strings.contains(#httpServletRequest.getHeader('User-Agent'),'Mobi')}" 
		class="johnny-deck-right-ad-section">
		<img src="/images/common/ads/250_250.jpg" width="250px" height="250px">
	</div>
	
	<div class="quiz-last-guide-section" style="display: none;">
		<div class="playvoice-check-icon">
			<span class="icon-line line-tip"></span>
			<span class="icon-line line-long"></span>
			<div class="icon-fix"></div>
		</div>
		<div class="quiz-last-guide-text">빙고판이 저장되었습니다 <i class="far fa-grin-alt"></i></div>
	</div>
	
	<!-- -------------------------[2.3 테스트 영역]----------------------------- -->
	<div class="test-card-section">
		<div class="test-card-div">
			<!-- last card -->
			<div id="moveToList" class="last-card"><div class="card-text-section">
				<div class="test-card card-back">
					<div class="card-paper-position"></div>
					<div class="card-text">
						<div class="discard-count">
							<div>말할 수 있는<br>문장</div>
							<div class="num mt-1">15</div>
						</div>
						<div class="keep-count">
							<div class="num mb-1">5</div>
							<div>추가 학습이<br>필요한 문장</div>
						</div>
					</div>
					<div class="card-center-line"></div>
				</div>
			</div></div>
			<!-- [test card] -->
			<div id="cards" class="card-stack-section" >
			<div th:each="card: ${#numbers.sequence(1,8)}" 
				th:class="'swipeCard test-card-cover type' + ${card}">
				<div class="card-text-section">
					<!-- 카드 뒷면 -->
					<div class="test-card card-back">
						<div class="card-paper-position"></div>
						<div class="card-text"><div class="card-sentence">
							<div class="kor">
								단언컨데, 이것은 진실입니다. / 나는 이것이 진실임을 단언할 수 있어요.
								<!-- 네가 사랑하는 사람 부러워. -->
							</div>
							<div class="eng" style="display: none;">
								<b>I have no</b> hesitation in saying that this is the truth.
								<!-- <b>I envy</b> somebody you love. -->
							</div>
							<a class="sentenceVoice" style="display: none;">
								<i class="fa fa-headphones-alt"></i>
							</a>
						</div></div>
						<div class="level-info">
							L<span class="levelNum">3</span><br>
							<label class="card-icon"></label>						
						</div>
						<div class="stage-info">
							<label class="card-icon"></label><br>
							S<span class="stageNum">12</span>
						</div>
					</div>
					<!-- 카드 앞면 -->
					<div class="test-card card-front">
						<div class="card-paper-position"></div>
					</div>
				</div>
			</div>
			</div>
		</div>
	</div>
	
	
	<!-- -------------------------[2.4 죠니덱 광고]----------------------------- -->
	<div class="johnny-deck-ad-section">
		<img src="/images/common/ads/320_50.jpg" width="100%" height="50px">
	</div>
	
	<!-- -----------------------[2.5 Review Test 영역]----------------------- -->
	<div id="discardQuizDiv" class="discard-word-quiz-section" style="display: none;">
		<div class="discard-word-quiz-guide">
			<h1>Review Test</h1>
			<div class="sub-title">리뷰 테스트는 DISCARD한 카드들을 복습합니다.</div>
		</div>
		<i id="openDiscardQuizGuideBtn" class="open-guide-btn far fa-question-circle"></i>
		<!-- 퀴즈 영역 -->
		<div class="discard-quiz-kor">
			<!-- 한국어 -->
			<div class="kor-section">
				<i class="fa fa-quote-left"></i>
				<span class="kor-text">나는 엄마에게 용돈을 주었다.</span>
				<i class="fa fa-quote-right"></i>
			</div>
			<!-- 정답 (틀린 경우) -->
			<div class="eng-text" style="display: none;">
				I gave my mom some money.
			</div>
			<!-- 단어 빈칸 -->
			<div id="blankDiv" class="blank-question-cover">
				<div class="blank">
					<div contenteditable="true">I</div>
				</div>
				<div class="blank">
					<div contenteditable="true">gave</div>
				</div>
				<div class="blank">
					<div contenteditable="true">my</div>
				</div>
				<div class="blank">
					<div contenteditable="true">mother</div>
				</div>
				<div class="target blank">
					<div contenteditable="true"></div>
				</div>
				<div class="blank">
					<div contenteditable="true">I</div>
				</div>
				<div class="blank">
					<div contenteditable="true">gave</div>
				</div>
				<div class="blank">
					<div contenteditable="true">my</div>
				</div>
				<div class="blank">
					<div contenteditable="true">mother</div>
				</div>
				<div class="target blank">
					<div contenteditable="true"></div>
				</div>
				<div class="blank">
					<div contenteditable="true">I</div>
				</div>
				<div class="blank">
					<div contenteditable="true">gave</div>
				</div>
				<div class="blank">
					<div contenteditable="true">my</div>
				</div>
			</div>
			<!-- 난이도 -->
			<div id="sentenceLevel" class="difficulty-rating-section style3">
				<div class="difficulty-rate-cover">
					<div class="rate-boundary super-hard"></div>
					<div class="rate-boundary hard"></div>
					<div class="rate-boundary difficult"></div>
					<div class="rate-boundary normal"></div>
					<div class="difficulty-rate" style="transform: rotate(-45deg);"></div>
				</div>
				<div class="rate-text-section">
					<div class="rate-count-cover"></div>
					<div class="rate-text-cover"></div>
				</div>
			</div>
		</div>
		<!-- 단어 선택지 영역 -->
		<div class="discard-quiz-word-cover">
			<div class="confirm-button-section">
				<button class="btn btn-confirm" type="button" style="display: none;">
					<i class="far fa-check-circle"></i> 확인
				</button>
				<button id="viewBingoBtn" class="btn btn-confirm btn-bingo" 
					type="button" style="display: none;"> Go Bingo!</button>
				
				<div class="reviewTestIconDiv test-result-icon-section" style="display: none;">
					<img src="/images/common/icon/volume_icon.gif">
				</div>
			</div>
			<div class="input-type-section d-none d-md-block">
				<button id="inputTextBtn" type="button">
					<i class="far fa-keyboard"></i> 직접 입력하기
				</button>
				<button id="wordSelectBtn" type="button" style="display: none;">
					<i class="fa fa-th-large"></i> 단어 선택하기
				</button>
				<div class="sort-desc">
					<i class="sort-icon fa fa-sort-alpha-down"></i>
					알파벳 순 정렬
				</div>
			</div>
			
			<div class="answer-word-cover">
				<div class="blank selected"><button>difficult</button></div>
				<div class="blank"><button>glasses</button></div>
				<div class="blank active"><button>lovely</button></div>
				<div class="blank"><button>I</button></div>
				<div class="blank"><button>different</button></div>
				<div class="blank"><button>borrow</button></div>
				<div class="blank selected"><button>get</button></div>
				<div class="blank active selected"><button>love</button></div>
				<div class="wrongAnswer blank"><button>guaranty</button></div>
				<div class="wrongAnswer blank"><button>have</button></div>
				<div class="rightAnswer blank"><button>mother</button></div>
				<div class="rightAnswer blank"><button>made</button></div>
			</div>
		</div>
		<!-- 리뷰 테스트 가이드 -->
		<div id="discardQuizGuideDiv" class="discard-quiz-guide-section" style="display: none;">
			<div class="discard-quiz-guide-cover">
				<ol class="d-none d-md-block">
					<li>우리말 예문을 보고 <label class="blank target">?</label> 에 
					들어갈 단어를 아래의 단어 목록에서 선택하여 영어 문장을 완성해 주세요.</li>
					<li><label class="input-button-style"><i class="far fa-keyboard"></i> 직접 입력하기</label>
					선택 시, 빈칸에 단어를 직접 입력할 수 있습니다.</li>
					<li>직접 입력 모드에서 단어를 입력 시, 입력한 알파벳에 해당하는 단어가 아래의 단어 목록에서 활성화됩니다.</li>
					<li>아래의 단어가 활성화된 상태에서 <kbd>Enter</kbd> 또는 <kbd>Tab</kbd>을 누르면 활성화된 단어 중 
					첫 번째가 빈칸에 채워집니다.</li>
				</ol>
				<ol class="d-md-none">
					<li>우리말 예문을 보고 <label class="blank target">?</label> 에 
					들어갈 단어를 아래의 단어 목록에서 선택하여 영어 문장을 완성해 주세요.</li>
					<li>잘못 입력 시 위에 입력된 단어 부분을 클릭하고 다시 단어를 선택해 주세요.</li>
				</ol>
				<div class="mt-3 d-none d-md-block">
					※ Safari 브라우저에선 문장을 모두 완성한 후 <kbd>Tab</kbd>을 누르면 주소줄이 활성화되므로
					<kbd>Enter</kbd>를 눌러주세요.<br>
				</div>
				<div class="mt-2">
					※ 리뷰 테스트는 디스카드한 예문들을 재인출하기 위한 퀴즈이므로 등장한 예문이 다시 나올 수 있습니다.
				</div>
				<i class="closeDiscardQuizBtn fa fa-times"></i>
			</div>
			<div class="closeDiscardQuizBtn close-button-section d-md-none">close</div>
		</div>
	</div>
	
	<!-- ------------------------[2.6 kiss & cry 영역]----------------------- -->
	<div id="kissAndCrySection" class="kiss-and-cry-section background1 complete" style="display: none;">
		<!-- 폭죽 -->
		<div class="firework-effect">
			<div class="firework-start"></div>
			<div class="firework-during"></div>
		</div>
		<!-- 라운드 -->
		<div class="round-title-section">
			<div class="round-section">
				<label class="round-cover">
					<span class="poker-icon">&#9827;</span>
					<span class="complete-msg">Bingo is complete! <i class="far fa-grin-alt"></i></span> 
					<span class="num">3</span> Round
				</label>
			</div>
		</div>
		<!-- title -->
		<div class="kiss-and-cry-title">
			bonus <b>bingo</b> time <i class="fa fa-th"></i>
		</div>
		
		<!-- 빙고 설명 영역 -->
		<div class="kiss-and-cry-desc-section">
			<i id="explainBingo" class="far fa-question-circle" title="빙고 설명 보기"></i>
		</div>
		<div class="bingo-explain-section">
			<div class="explain-text-section">
				<h5>bonus bingo</h5>
				<i class="closeBingoDiv fa fa-times"></i>
				<div class="explain-text">
					카드를 <b>discard</b>하면 덱콘이 지급됩니다!<br>
					같은 세트 덱콘의 빙고 개수에 따라 상품을 드려요!<br>
					상품은 다음 달 1일 (휴무 제외) 등록된 번호 또는 주소지로 일괄 지급 됩니다.<br>
					<span class="d-lg-none"><br>
						※ 럭키 포인트는 빙고 한 라운드가 완성되면<br>플레이 포인트로 지급됩니다.
					</span>
				</div>
			</div>
			<div class="bingo-item-cover">
				<div class="bingo-gift-item-area">
					<div class="empty-area"></div>
					<div class="item-area style1"><img src="/images/app/playvoiceBook/deckcon/con_0.svg"></div>
					<div class="item-area style2"><img src="/images/app/playvoiceBook/deckcon/con_20.svg"></div>
					<div class="item-area style3"><img src="/images/app/playvoiceBook/deckcon/con_40.svg"></div>
					<div class="item-area style4"><img src="/images/app/playvoiceBook/deckcon/con_60.svg"></div>
					<div class="item-area style5"><img src="/images/app/playvoiceBook/deckcon/con_80.svg"></div>
					<div class="empty-area">Bingo1</div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="empty-area">Bingo2</div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="empty-area">Bingo3</div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="empty-area">Bingo4</div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="empty-area">Bingo5</div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
					<div class="item-area"></div><div class="item-area"></div>
				</div>
				<img src="/images/app/playvoicebook/deckcon/bingo_items.png">
			</div>
			<div class="closeBingoDiv close-button-section d-md-none">close</div>
		</div>
		
		<!-- 럭키 포인트 영역 -->
		<div class="lucky-point-section">
			<div class="explain-text-section">
				<h5>Lucky Point</h5>
				<div class="explain-text">
					획득한 럭키 포인트는 빙고 한 라운드가 모두 끝나면<br>
					<b>플레이 포인트</b>로 지급됩니다
				</div>
			</div>
			<!-- 라운드 완성 시 튀어나오는 동전 -->
			<div class="coin-flip">
				<div class="coin-tails">
					<div class="gold-point-section">
						<div class="gold-point-cover">
							<div class="currency">PP</div>
							<div class="shape">
								<div class="top">plavoice</div>
								<div class="bottom">GOLD</div>
							</div>
						</div>
					</div>
				</div>
				<div class="coin-heads">
					<div class="gold-point-section flip">
						<div class="gold-point-cover">
							<div class="currency">PP</div>
							<div class="shape">
								<div class="top">plavoice</div>
								<div class="bottom">GOLD</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="gift-box-section">
				<div class="gift" title="럭키 포인트 상자">
					<div class="gift-top"></div>
					<div class="gift-box">
						<div class="lucky-point-num">+ 24</div>				
						<div class="play-point-mark"></div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- 덱콘 빙고 영역 -->
		<div class="deck-con-section roundCase1">
			<div class="deck-con-case">
				<div class="deck-con-case case-side front">
					<div id="deckConArea" class="case-divide-low row no-gutters">
						<div class="case-divide col-auto">
							<div class="item-divide">
							<img src="/images/app/playvoicebook/deckcon/con_1.svg">
							</div>
						</div>
						<div class="case-divide col-auto">
							<div class="item-divide">
							<img src="/images/app/playvoicebook/deckcon/con_2.svg">
							</div>
						</div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div><div class="case-divide col-auto"></div>
						<div class="case-divide col-auto"></div>
					</div>
				</div>
			</div>
		</div>
		<div id="closeBreak" class="close-section-div">
			<div class="close-text infi-blink">click to continue</div>
		</div>
	</div>
	
	
</div><!-- end of tracerQuizDiv -->
</div><!-- end of cardQuizSection -->


<!-- -----------------------[Johnny Deck 플레이 할 수 없음 ]----------------------- -->
<div id="cardQuizSection" th:unless="${reentrance == true}" 
	class="playvoice-play-kick-section my-4">
	<div id="quizBeforeDiv" class="before-quiz-section empty-quiz">
		<div class="card-dimention-section">
			<div class="card-coverage-section">
				<div class="test-card-coverage cube-side top">
					<img src="/images/app/playvoicebook/card_case_paper.png">
					<div class="case-deco-line">
						&#9670; <span class="text-dark">&#9827;</span>
						&#9829; <span class="text-dark">&#9824;</span>
						&#9670; <span class="text-dark">&#9827;</span>
						&#9829; <span class="text-dark">&#9824;</span><br>
						<span class="deco-text">Johnny's Deck</span>
					</div>
				</div>
				<div class="cube-side bottom"></div>
				<div class="cube-side left"></div>
				<div class="cube-side right">Johnny's Deck</div>
				<div class="cube-side front"><div>speak out!</div></div>
				<div class="cube-side back"></div>
				<div class="card-click-text empty-card">
					<a th:href="@{/playvoiceBook/level}">The card deck<br>is Empty</a>
				</div>
			</div>
		</div>
		<!-- --------------[카드를 모두 discard하여 테스트 할 문제가 없는 경우]------------- -->
		<div class="play-kick-guide-message">
			<div class="play-kick-guide-cover d-flex align-content-between flex-wrap">
				<div class="play-kick-guide-title">
					<label class="title-border">
						<span class="johnny-deck">
							<span class="card-icon">&#9670;</span>
							Johnny  Deck
							<span class="card-icon">&#9824;</span>
						</span>
						축하합니다!<br> 신규 Stage가 오픈되었습니다.<br>
						<a class="study" th:href="@{/playvoiceBook/level}">
							<i class="fa fa-book-open"></i> 학습하기
						</a>
						 에서 새로운 Stage를 먼저 학습해 주세요.
					</label>
				</div>
				<div class="box">
					<div class="box-body">
						<img class="img" src="https://via.placeholder.com/150">
						<div class="box-lid">
							<div class="box-bowtie"></div>
						</div>
					</div>
				</div>
				<div class="play-kick-guide">
					<button th:href="@{/playvoiceBook/level}" type="button"
						onclick="location.href=$(this).attr('href')" 
						class="btn btn-mobile btn-goto-study">
						<i class="fa fa-book-open"></i> 학습하기
					</button>
				</div>
				<div class="precautions">
					<ul>
						<li>한 번 <b class="point">Discard한 문장</b>은 출제되지 않습니다.</li>
						<li>죠니 덱에서 남은 카드의 수가 15개 이하가 되었을 때 플레이보이스북의 다음 스테이지가 열립니다.</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
</th:block>


<!-- ----------------------------[포인트 부족]--------------------------------- -->
<th:block th:unless="${sufficientPoint == true}">
<div id="cardQuizSection" class="playvoice-play-kick-section my-4">
	<div id="quizBeforeDiv" class="before-quiz-section">
		<div class="card-dimention-section">
			<div class="card-coverage-section">
				<div class="test-card-coverage cube-side top">
					<img src="/images/app/playvoicebook/card_case_paper.png">
					<div class="case-deco-line">
						&#9670; <span class="text-dark">&#9827;</span>
						&#9829; <span class="text-dark">&#9824;</span>
						&#9670; <span class="text-dark">&#9827;</span>
						&#9829; <span class="text-dark">&#9824;</span><br>
						<span class="deco-text">Johnny's Deck</span>
					</div>
				</div>
				<div class="cube-side bottom"></div>
				<div class="cube-side left"></div>
				<div class="cube-side right">Johnny's Deck</div>
				<div class="cube-side front"><div>speak out!</div></div>
				<div class="cube-side back"></div>
				<div class="card-click-text empty-card">
					Community activity required
				</div>
			</div>
		</div>
		<div class="play-kick-guide-message">
			<div class="play-kick-guide-cover">
				<div class="play-kick-guide-title">
					<label class="title-border">
						<span class="johnny-deck">
							<span class="card-icon">&#9827;</span>
							Johnny  Deck
							<span class="card-icon">&#9824;</span>
						</span>
						카드 셔플을 위한 플레이 포인트가 부족합니다.
					</label>
				</div>
				<div class="play-kick-guide">
				
				</div>
			</div>
		</div>
	</div>
</div>
</th:block>

<div class="johnny-deck-ad-bottom-section">
	<img src="/images/common/ads/320_50.jpg" width="100%" height="50px">
</div>

</section>